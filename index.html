<html>
	<head>
		<title>Tetris, by Y_Less.</title>
        <style type="text/css">
            
            body, html
            {
                border: 0;
                margin: 0;
                padding: 0;
                overflow: hidden;
            }
            
            body
            {
                width: 100%;
                height: 100%;
            }
            
            canvas, body
            {
                display: block;
                position: absolute;
                visibility: shown;
            }
            
        </style>
	</head>
	<body>
        <!-- <canvas id="tetrisSurface"></canvas> -->
		<!-- <script type="text/javascript" src="Tetris.js"></script> -->
		<script type="text/javascript">
        
        var BLOCK_SIZE = 30;
        
        </script>
		<script type="text/javascript" src="Utils.js"></script>
		<script type="text/javascript" src="View.js"></script>
		<script type="text/javascript" src="Controller.js"></script>
		<script type="text/javascript" src="Background/View.js"></script>
		<script type="text/javascript" src="Menu/Controller.js"></script>
		<script type="text/javascript" src="Menu/View.js"></script>
		<!-- <script type="text/javascript" src="Menu/View.js"></script> -->
        <script type="text/javascript">
        
        var Test = function (y)
        {
            var _x = y;
            Object.defineProperty(this, "x", {
                    get: function () { return _x; },
                    set: ReadOnly('x'),
                });
            return this;
        }
        var T2 = new Test(88);
        
        window.requestAnimFrame = (function ()
            {
                return window.requestAnimationFrame    ||
                    window.webkitRequestAnimationFrame ||
                    window.mozRequestAnimationFrame    ||
                    function (callback)
                    {
                        window.setTimeout(callback, 1000 / 60);
                    };
            })();
        
        window.onload = function()
        {
            /*var GLOBAL_CANVAS  = document.getElementById('tetrisSurface');
            var GLOBAL_CONTEXT = GLOBAL_CANVAS.getContext('2d');*/
            
            function ResizeCanvas()
            {
                Background.Resize();
            }
            
            window.addEventListener('resize', ResizeCanvas, false);
            //ResizeCanvas();
            
            Background.Init();
            Background.Show();
            Menu.View.Show();
            
            (function ()
            {
                var _lastRender = Date.now();
                var _lastUpdate = Date.now();
                
                function AnimLoop()
                {
                    requestAnimFrame(AnimLoop);
                    var last = _lastRender;
                    _lastRender = Date.now();
                    Background._Render(_lastRender - last);
                }
                
                function UpdateLoop()
                {
                    var last = _lastUpdate;
                    _lastUpdate = Date.now();
                    Background.Update(_lastUpdate - last);
                }
                
                AnimLoop();
                window.setInterval(UpdateLoop, 50);
            })();
            
            //Background._Render(100);
            
            //window.setInterval(function () { Background._Render(100); }, 1000);
            
        };
        
        </script>
	</body>
</html>


